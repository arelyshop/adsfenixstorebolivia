<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de Anuncios - Tarjetas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
        }

        /* Estados estáticos para mejor rendimiento */
        .status-badge-activo { 
            background-color: #22c55e; 
            color: white; 
            box-shadow: 0 2px 4px rgba(34, 197, 94, 0.3);
        }

        .status-badge-programado { 
            background-color: #eab308; 
            color: white; 
            box-shadow: 0 2px 4px rgba(234, 179, 8, 0.3);
        }
        
        .ad-card {
            aspect-ratio: 2/3;
            transition: transform 0.2s ease-in-out;
        }
        
        .ad-card:hover {
            transform: translateY(-4px);
        }

        .video-container {
            aspect-ratio: 9/16;
            background: #000;
            border-radius: 1.5rem;
            overflow: hidden;
            position: relative;
        }

        /* Estilos para tipos de anuncio */
        .tipo-tag {
            background-color: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        /* Clase para el botón de filtro seleccionado */
        .filter-active {
            border-color: #3b82f6 !important;
            ring: 2px;
            ring-color: #3b82f6;
            background-color: #eff6ff !important;
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="p-4 md:p-6">

    <div class="max-w-[1600px] mx-auto">
        <!-- Encabezado -->
        <header class="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
                <h1 class="text-2xl font-bold text-slate-800 tracking-tight cursor-pointer hover:text-blue-600 transition-colors" onclick="setFilter('all')">
                    Catálogo de Anuncios
                </h1>
                <p class="text-slate-500 text-sm">Filtra por tipo, ciudad o estado de publicación</p>
            </div>
            
            <div class="flex flex-wrap gap-2">
                <button onclick="setFilter('all')" id="btn-all" class="filter-btn bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-200 flex items-center gap-2 hover:bg-slate-50 transition-all filter-active">
                    <span class="text-xs font-bold text-slate-600 uppercase">TODOS</span>
                </button>
                <button onclick="setFilter('Activo')" id="btn-activo" class="filter-btn bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-200 flex items-center gap-2 hover:bg-slate-50 transition-all">
                    <span class="w-2 h-2 rounded-full bg-green-500"></span>
                    <span class="text-xs font-bold text-slate-600 uppercase"><span id="active-count">0</span> ACTIVOS</span>
                </button>
                <button onclick="setFilter('Programado')" id="btn-programado" class="filter-btn bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-200 flex items-center gap-2 hover:bg-slate-50 transition-all">
                    <span class="w-2 h-2 rounded-full bg-yellow-500"></span>
                    <span class="text-xs font-bold text-slate-600 uppercase"><span id="scheduled-count">0</span> PROGRAMADOS</span>
                </button>
            </div>
        </header>

        <!-- Buscador -->
        <div class="mb-8">
            <div class="relative max-w-md">
                <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                </span>
                <input type="text" id="searchInput" placeholder="Buscar por ciudad, tipo, asesora o producto..." 
                    class="w-full pl-12 pr-4 py-3 rounded-2xl border-none focus:ring-2 focus:ring-blue-500 bg-white shadow-sm text-sm">
            </div>
        </div>

        <!-- Cuadrícula de Anuncios -->
        <div id="adsGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-6">
            <!-- Las tarjetas se cargan mediante JavaScript -->
        </div>
    </div>

    <!-- Modal de Video -->
    <div id="videoModal" class="fixed inset-0 bg-black/95 z-50 hidden flex items-center justify-center p-4">
        <button onclick="closeModal()" class="absolute top-6 right-6 text-white hover:scale-110 transition-transform">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
        <div class="max-w-[380px] w-full">
            <div class="video-container shadow-2xl ring-1 ring-white/10">
                <div class="w-full h-full bg-gradient-to-b from-slate-800 to-black flex items-center justify-center text-center p-6">
                    <div class="text-white">
                        <div class="w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-500/50">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        </div>
                        <h2 id="modalTitle" class="font-bold text-xl mb-2"></h2>
                        <p id="modalAsesora" class="text-blue-400 font-medium"></p>
                        <p class="text-xs text-slate-500 mt-8 uppercase tracking-widest">Reproduciendo Reel...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const adsData = [
            { id: 1, nombre: "Zapatillas Urban Pro", foto: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=600&h=900&fit=crop", estado: "Activo", tipo: "PRODUCTO SOLO", asesora: "Maria Garcia", whatsapp: "+51900000001", ciudad: "Madrid", inicio: "01/02/2024" },
            { id: 2, nombre: "Reloj Smart Elite", foto: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=600&h=900&fit=crop", estado: "Programado", tipo: "COMBO", asesora: "Lucia Fernandez", whatsapp: "+51900000002", ciudad: "Barcelona", inicio: "15/02/2024" },
            { id: 3, nombre: "Audífonos Studio X", foto: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=600&h=900&fit=crop", estado: "Activo", tipo: "TRICOMBO", asesora: "Maria Garcia", whatsapp: "+51900000001", ciudad: "Valencia", inicio: "20/01/2024" },
            { id: 4, nombre: "Cámara Alpha 7", foto: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=600&h=900&fit=crop", estado: "Activo", tipo: "PRODUCTO SOLO", asesora: "Elena Ruiz", whatsapp: "+51900000003", ciudad: "Sevilla", inicio: "05/02/2024" },
            { id: 5, nombre: "Mochila Explorer", foto: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=600&h=900&fit=crop", estado: "Programado", tipo: "COMBO", asesora: "Lucia Fernandez", whatsapp: "+51900000002", ciudad: "Malaga", inicio: "01/03/2024" },
            { id: 6, nombre: "Lentes de Sol Aviator", foto: "https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=600&h=900&fit=crop", estado: "Activo", tipo: "PRODUCTO SOLO", asesora: "Elena Ruiz", whatsapp: "+51900000003", ciudad: "Madrid", inicio: "10/02/2024" },
            { id: 7, nombre: "Perfume Night Bloom", foto: "https://images.unsplash.com/photo-1541643600914-78b084683601?w=600&h=900&fit=crop", estado: "Programado", tipo: "TRICOMBO", asesora: "Maria Garcia", whatsapp: "+51900000001", ciudad: "Bilbao", inicio: "28/02/2024" }
        ];

        let currentStatusFilter = 'all';

        function setFilter(status) {
            currentStatusFilter = status;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('filter-active'));
            if (status === 'all') document.getElementById('btn-all').classList.add('filter-active');
            if (status === 'Activo') document.getElementById('btn-activo').classList.add('filter-active');
            if (status === 'Programado') document.getElementById('btn-programado').classList.add('filter-active');
            applyAllFilters();
        }

        function renderAds(data) {
            const grid = document.getElementById('adsGrid');
            grid.innerHTML = '';

            // Ordenar: Activos primero, luego Programados
            const sortedData = [...data].sort((a, b) => {
                if (a.estado === "Activo" && b.estado === "Programado") return -1;
                if (a.estado === "Programado" && b.estado === "Activo") return 1;
                return 0;
            });

            sortedData.forEach(ad => {
                const card = document.createElement('div');
                card.className = "ad-card relative group rounded-2xl md:rounded-[2rem] overflow-hidden shadow-md bg-white";
                
                const statusBadge = ad.estado === 'Activo' ? 'status-badge-activo' : 'status-badge-programado';
                const dateLabel = ad.estado === 'Activo' ? 'Activo desde' : 'Publicación';
                
                card.innerHTML = `
                    <img src="${ad.foto}" alt="${ad.nombre}" class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent"></div>
                    
                    <!-- Información de Estado y Fecha -->
                    <div class="absolute top-3 left-3 md:top-5 md:left-5 flex flex-col items-start gap-1">
                        <span class="${statusBadge} px-2 py-1 md:px-3 md:py-1 rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest shadow-lg">
                            ${ad.estado}
                        </span>
                        <div class="bg-black/40 backdrop-blur-sm px-2 py-0.5 rounded-lg">
                            <p class="text-[8px] md:text-[9px] text-white/90 font-medium">
                                ${dateLabel}: <span class="font-bold">${ad.inicio}</span>
                            </p>
                        </div>
                    </div>

                    <button onclick="openModal('${ad.nombre}', '${ad.asesora}')" class="absolute top-3 right-3 md:top-5 md:right-5 bg-white/10 backdrop-blur-md hover:bg-white/30 p-2 rounded-full text-white transition-all shadow-xl">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    </button>

                    <!-- Información Inferior -->
                    <div class="absolute bottom-0 left-0 right-0 p-3 md:p-5">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-[10px] text-white/70 uppercase tracking-widest font-bold">${ad.ciudad}</span>
                            <span class="text-[10px] text-white/40">•</span>
                            <span class="px-2 py-0.5 rounded text-[8px] font-bold uppercase tracking-tighter tipo-tag">
                                ${ad.tipo}
                            </span>
                        </div>
                        
                        <h3 class="text-white font-bold text-sm md:text-lg mb-2 leading-tight">${ad.nombre}</h3>
                        
                        <div class="flex items-center justify-between gap-2 mt-4 pt-4 border-t border-white/10">
                            <div class="flex items-center gap-2 overflow-hidden">
                                <div class="w-6 h-6 md:w-8 md:h-8 rounded-full bg-blue-500 flex-shrink-0 flex items-center justify-center text-[10px] font-bold text-white uppercase">
                                    ${ad.asesora.charAt(0)}
                                </div>
                                <div class="truncate">
                                    <p class="text-[10px] text-white/60 leading-none mb-0.5">Asesora</p>
                                    <p class="text-[11px] md:text-xs text-white font-medium truncate">${ad.asesora}</p>
                                </div>
                            </div>
                            <a href="https://wa.me/${ad.whatsapp.replace('+', '')}" target="_blank" class="bg-green-500 hover:bg-green-400 p-2 rounded-xl text-white transition-colors shadow-lg shadow-green-900/20">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                            </a>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function updateCounts() {
            const active = adsData.filter(ad => ad.estado === 'Activo').length;
            const scheduled = adsData.filter(ad => ad.estado === 'Programado').length;
            document.getElementById('active-count').textContent = active;
            document.getElementById('scheduled-count').textContent = scheduled;
        }

        function applyAllFilters() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            const filtered = adsData.filter(ad => {
                const matchesStatus = currentStatusFilter === 'all' || ad.estado === currentStatusFilter;
                const matchesSearch = ad.nombre.toLowerCase().includes(searchTerm) || 
                                     ad.asesora.toLowerCase().includes(searchTerm) || 
                                     ad.ciudad.toLowerCase().includes(searchTerm) ||
                                     ad.tipo.toLowerCase().includes(searchTerm);
                return matchesStatus && matchesSearch;
            });
            
            renderAds(filtered);
        }

        document.getElementById('searchInput').addEventListener('input', applyAllFilters);

        function openModal(title, asesora) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalAsesora').textContent = "Gestionado por: " + asesora;
            document.getElementById('videoModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('videoModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Inicializar
        updateCounts();
        renderAds(adsData);
    </script>
</body>
</html>
